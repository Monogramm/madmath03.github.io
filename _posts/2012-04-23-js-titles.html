---
title: "Dynamic titles with JS"
description: "Dynamic titles with JavaScript"
published: true
---

<div>
	<h1>Dynamic titles with JavaScript</h1>
	
	<div class="portlet menu right">
		<div class="menu-decoration">
			<div class="menu-title">Titles</div>
		</div>
		<div class="portlet-content menu-content">
			<ul id="menu"><li/></ul>
		</div>
	</div>
	
	<h2>Introduction</h2>
	<p>
		The menu above is generated using pure <em>JavaScript</em>and if you click
		in the content of the page, the menu will be moved to the
		click position.
	</p>
	
	<h2>Having troubles?</h2>
	<p>
		You do not see the contents of the menu? Maybe JavaScript
		is disabled, or maybe there is an error
		in the script :sweat:...<br/>
		In this case, do not hesitate to contact me or send a Pull Request.
	</p>
	
	<h2>Some titles to test</h2>
		<h3><strong>Some bold title...</strong></h3>
			
			<h4>An h4</h4>
			<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
				eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
				ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
				aliquip.</p>
			
			<h4>Another h4</h4>
			<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
				eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
				ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
				aliquip.</p>
		
		<h3><em>Some italic title</em></h3>
			<h4></h4>
			<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
				eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
				ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
				aliquip.</p>
	<h2>Another h2...</h2>
	<p>
		Lorem ipsum dolor sit amet, <em>consectetuer adipiscing elit</em>.
		Nunc congue ipsum vestibulum libero. Aenean vitae justo. Nam eget
		tellus. Etiam convallis, est eu lobortis mattis, lectus tellus tempus
		felis, a ultricies erat ipsum at metus.
	</p>
	<p>
		Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
		<a href="#">Morbi et risus</a>. Aliquam nisl. Nulla facilisi. Cras
		accumsan vestibulum ante. Vestibulum sed tortor. Praesent
		<span class="caps">SMALL CAPS</span> tempus fringilla elit. Ut elit
		diam, sagittis in, nonummy in, gravida non, nunc. Ut orci. Class
		aptent taciti sociosqu ad litora torquent per conubia nostra, per
		inceptos hymenaeos. Nam egestas, orci eu imperdiet malesuada, nisl
		purus fringilla odio, quis commodo est orci vitae justo. Aliquam
		placerat odio tincidunt nulla. Cras in libero. Aenean rutrum, magna
		non tristique posuere, erat odio eleifend nisl, non convallis est
		tortor blandit ligula. Nulla id augue.
	</p>
	
	<h1>Another main title!</h1>
	<p>
		<img src="/files/demos/test.jpg" class="top pull-1 left" alt="test"/>
		Lorem ipsum dolor sit amet, <em>consectetuer adipiscing elit</em>.
		Nunc congue ipsum vestibulum libero. Aenean vitae justo. Nam eget
		tellus. Etiam convallis, est eu lobortis mattis, lectus tellus tempus
		felis, a ultricies erat ipsum at metus.
	</p>
	<p>
		Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
		<a href="#">Morbi et risus</a>. Aliquam nisl. Nulla facilisi. Cras
		accumsan vestibulum ante. Vestibulum sed tortor. Praesent
		<span class="caps">SMALL CAPS</span> tempus fringilla elit. Ut elit
		diam, sagittis in, nonummy in, gravida non, nunc. Ut orci. Class
		aptent taciti sociosqu ad litora torquent per conubia nostra, per
		inceptos hymenaeos. Nam egestas, orci eu imperdiet malesuada, nisl
		purus fringilla odio, quis commodo est orci vitae justo. Aliquam
		placerat odio tincidunt nulla. Cras in libero. Aenean rutrum, magna
		non tristique posuere, erat odio eleifend nisl, non convallis est
		tortor blandit ligula. Nulla id augue.
	</p>

	<p>Nullam mattis, odio ut tempus facilisis, metus nisl facilisis
		metus, auctor consectetuer felis ligula nec mauris. Vestibulum odio
		erat, fermentum at, commodo vitae, ultrices et, urna. Mauris
		vulputate, mi pulvinar sagittis condimentum, sem nulla aliquam velit,
		sed imperdiet mi purus eu magna. Nulla varius metus ut eros. Aenean
		aliquet magna eget orci. Class aptent taciti sociosqu ad litora.</p>
	<p>Vivamus euismod. Cum sociis natoque penatibus et magnis dis
		parturient montes, nascetur ridiculus mus. Suspendisse vel nibh ut
		turpis dictum sagittis. Aliquam vel velit a elit auctor sollicitudin.
		Nam vel dui vel neque lacinia pretium. Quisque nunc erat, venenatis
		id, volutpat ut, scelerisque sed, diam. Mauris ante. Pellentesque
		habitant morbi tristique senectus et netus et malesuada fames ac
		turpis egestas. Donec mattis. Morbi dignissim sollicitudin libero.
		Nulla lorem.</p>
	<blockquote>
		<p>Integer cursus ornare mauris. Praesent nisl arcu, imperdiet eu,
			ornare id, scelerisque ut, nunc. Praesent sagittis erat sed velit
			tempus imperdiet. Ut tristique, ante in interdum hendrerit, erat
			enim faucibus felis, quis rutrum mauris lorem quis sem. Vestibulum
			ligula nisi, mattis nec, posuere et, blandit eu, ligula. Nam
			suscipit placerat odio. Class aptent taciti sociosqu ad litora
			torquent per conubia nostra, per inceptos hymenaeos. Pellentesque
			tortor libero, venenatis vitae, rhoncus eu, placerat ut, mi. Nulla
			nulla.</p>
	</blockquote>
	<p>
		Maecenas vel metus quis magna pharetra fermentum. <em>Integer sit
			amet tortor</em>. Maecenas porttitor, pede sed gravida auctor, nulla
		augue aliquet elit, at pretium urna orci ut metus. Aliquam in dolor.
		Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
		posuere cubilia Curae; Sed aliquam, tellus id ornare posuere, quam
		nunc accumsan turpis, at convallis tellus orci et nisl. Phasellus
		congue neque a lorem.
	</p>
	
</div>

<script type="text/javascript">
	/* <![CDATA[ */
	
	/**
	 * Function to add an item in the title list.
	 * 
	 * @param domItem DOM element of the title.
	 * @param parentItem DOM element where to add the list item.
	 * @param id id to use for the title.
	 * 		This will be used for the reference of the anchor.
	 */
	function addListTitleItem(domItem, parentItem, id) {
		var listItem = document.createElement("li");
		var anchor = document.createElement("a");
		var span = document.createElement("span");
		
		// define an id for the title 
		var titleId = '';
		if (domItem.id)
			titleId = domItem.id;
		else
			domItem.id = titleId = id;
		
		// set the anchor
		anchor.setAttribute('href', '#'+titleId);
		span.innerHTML = domItem.textContent;
		
		anchor.appendChild(span);
		listItem.appendChild(anchor);
		parentItem.appendChild(listItem);
	}
	/**
	 * Function to print the available titles in the menu.
	 * 
	 * @param idMenu id of the menu in which to print the titles menu.
	 */
	function printTitles(idMenu) {
		var listMenu = Array();
		for (var i = 1 ; i <= 6 ; i++)
			listMenu['h'+i] = i-1;
		var listIds = Array();
		for (var i = 1 ; i <= 6 ; i++)
			listIds['h'+i] = 0;
		
		// List of titles
		var titleTags = document.getElementsByTagName('h1');
		
		var n = titleTags.length;
		// If there are no titles, just leave
		if (n <= 0)
			return;
		
		// The titles menu and the list
		var titlesMenu = document.getElementById((idMenu != null) ? idMenu : "menu");
		titlesMenu.innerHTML = "";
		
		// Create the list
		var parentNode = titlesMenu;
		var previousLevel = 0;
		for (var t = 0 ; t < n ; t++) {
			for (var elem = titleTags[t] ; elem != titlesMenu && elem.nextSibling ; elem = elem.nextSibling) {
				var nodeName = elem.nodeName.toLowerCase();
				// check that the node is a header
				if (nodeName in listMenu) {
					// retrieve appropriate parent
					for (var i = previousLevel - listMenu[nodeName] ; i > 0 ; i--) {
						parentNode = parentNode.parentNode.parentNode; // li, then ul
					}
					
					// if on the same level
					if ( (previousLevel - listMenu[nodeName]) >= 0) {
						//parentNode = parentNode.parentNode;
						addListTitleItem(elem, parentNode, 
								nodeName+'_'+listIds[nodeName]++);
					}
					else {
						parentNode = parentNode.lastChild;
						newListNode = document.createElement("ul");
						addListTitleItem(elem, newListNode, 
								nodeName+'_'+listIds[nodeName]++);
						parentNode.appendChild(newListNode);
						parentNode = newListNode;
					}
					previousLevel = listMenu[nodeName];
				}
			}
		}
	}
	
	printTitles();
	
	/* ]]> */
</script>
